{% extends "base.html" %}

{% block title %}Events{% endblock %}

{% block content %}
<!-- Event creation form -->
<form method="post" action="{{ url_for('home.events') }}">
    <label for="title">Event Title:</label>
    <input type="text" id="title" name="title" required><br><br>

    <label for="start_date">Start Date:</label>
    <input type="datetime-local" id="start_date" name="start_date" required><br><br>

    <label for="end_date">End Date:</label>
    <input type="datetime-local" id="end_date" name="end_date" required><br><br>

    <input type="submit" value="Add Event">
</form>
<br>

<!-- Adding FullCalendar's CSS and JS -->
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.9/index.global.min.js'></script>

<!-- Your calendar container -->
<div id='calendar'></div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            events: '/api/events'  // Fetch events dynamically from the endpoint we created
        });
        calendar.render();
    });
</script>
{% endblock %}
